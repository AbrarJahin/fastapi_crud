# =========================================================
# Database
# =========================================================
DATABASE_URL=sqlite:///./app.sqlite3


# =========================================================
# Ollama Server
# =========================================================
# IMPORTANT:
# - Use IP or hostname reachable from FastAPI
# - Do NOT include trailing /api
OLLAMA_BASE_URL=http://192.168.1.130:11434

# Embedding model (must exist in `ollama list`)
OLLAMA_EMBED_MODEL=bge-m3:latest

# Chat / QA model
OLLAMA_CHAT_MODEL=qwen2.5:14b-instruct

# Translation model (can be same as chat model)
OLLAMA_TRANSLATE_MODEL=qwen2.5:14b-instruct

# =========================================================
# Ollama timeouts (seconds) - BEST PRACTICE split timeouts
# =========================================================
# Connection handshake timeout
OLLAMA_TIMEOUT_CONNECT_S=5

# Generic GET read timeout (used for config-ish GET calls)
OLLAMA_TIMEOUT_GET_READ_S=10

# Generic POST read timeout (fallback if endpoint doesn't override)
OLLAMA_TIMEOUT_POST_READ_S=120

# Write timeout (sending request body)
OLLAMA_TIMEOUT_WRITE_S=30

# Pool timeout
OLLAMA_TIMEOUT_POOL_S=30

# Specific endpoint read timeouts (overrides for /api/chat etc.)
# Chat can take long (especially ask-web prompts), so give it more
OLLAMA_CHAT_READ_TIMEOUT_S=600

# Embeddings should be fast but can still be heavy
OLLAMA_EMBEDDINGS_READ_TIMEOUT_S=60

# Tags/health should always be quick
OLLAMA_TAGS_READ_TIMEOUT_S=5

# Optional: keep model loaded in memory for faster repeated calls
# Examples: 0, 30m, 2h
OLLAMA_KEEP_ALIVE=30m

# Optional: cap how many tokens the model generates (prevents runaway responses)
OLLAMA_NUM_PREDICT=256


# =========================================================
# Web QA (DuckDuckGo + page fetching)
# =========================================================

# Timeout per web page fetch (seconds)
ASK_WEB_FETCH_TIMEOUT_S=8

# User-Agent for web requests (some sites block default clients)
ASK_WEB_USER_AGENT=fastapi-agent/1.0 (+local)

# Maximum bytes read from a single web page (HTML only)
ASK_WEB_MAX_PAGE_BYTES=1000000

# Concurrent page fetches per request
ASK_WEB_FETCH_CONCURRENCY=3
